/****************************************************************************************
* File: main.cpp
*
* Description: TODO
*
* Created: 12/2/2013, by Kyle McGahee
****************************************************************************************/

/*---------------------------------------------------------------------------------------
*                                       INCLUDES
*--------------------------------------------------------------------------------------*/

#include <cstdio>

#include "stm32f4xx.h"
#include "gpio.h"
#include "differential_paired_stepper_motors.h"
#include "pid.h"
#include "system_timer.h"
#include "timer_interrupt_oc.h"

/*---------------------------------------------------------------------------------------
*                                   LITERAL CONSTANTS
*--------------------------------------------------------------------------------------*/

/*---------------------------------------------------------------------------------------
*                                        TYPES
*--------------------------------------------------------------------------------------*/

/*---------------------------------------------------------------------------------------
                                    MEMORY CONSTANTS
---------------------------------------------------------------------------------------*/

/*---------------------------------------------------------------------------------------
*                                      VARIABLES
*--------------------------------------------------------------------------------------*/

SystemTimer system_timer;

/*---------------------------------------------------------------------------------------
*                                     PROCEDURES
*--------------------------------------------------------------------------------------*/

/*****************************************************************************
* Function: main
*
* Description: TODO
*****************************************************************************/
int main(void)
{
    DifferentialPairedStepperMotors motors(true, // Acceleration enabled
                                           180,  // Turn speed (degrees per second)
                                           6,    // Wheel diameter (centimeters)
                                           11,   // Wheel base (centimeters)
                                           200,  // Full steps per revolution
                                           16    // Pulses per full steps (for microstepping)
                                           );

    motors.Initialize();

    system_timer.Initialize(1e6);

    while (1);

    // return 0; KLM: Remove warning: statement is unreachable.

} // main()
